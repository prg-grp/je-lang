package SecureCalculator;

import jif.util.List;

public final class TaskProcessor [principal Alice] authority (Alice) {

    Double{Alice->*; Alice<-*} salary = 11.7;

    public Double{Alice->_; Alice<-*} process{Alice<-*}(List{} taskList) where authority(Alice) {
        List taskListE = endorse(taskList, {} to {Alice<-*});
        Double result = salary;
        {
            int q = 0;
            try {
                q = taskListE.size();
            } catch (NullPointerException e) {
            }
            for (int i = 0; i < q; i++) {
                Object task;
                {
                    Object j = null;
                    try {
                        j = taskListE.get(i);
                    } catch (NullPointerException e) {
                    }
                    task = j;
                }
                {
                    Double c = null;
                    try {
                        c = ((Task) task).run(result);
                    } catch (NullPointerException e) {
                    }
                    result += c;
                }
            }
        }
        return declassify(result, {Alice->*; Alice<-*} to {Alice->_; Alice<-*});
    }
}
